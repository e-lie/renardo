graph LR
    subgraph "Component Layer"
        View["ğŸ“„ Posts.view.svelte<br/><b>View Component</b>"]
    end

    subgraph "Store Layer"
        Store["ğŸ—„ï¸ Posts.store.ts<br/><b>State Management</b><br/>â€¢ actions.loadPosts()<br/>â€¢ getters.posts"]
    end

    subgraph "GraphQL Layer"
        Client["ğŸ”Œ urql Client<br/><b>GraphQL Client</b><br/>â€¢ client.query()<br/>â€¢ client.mutation()"]
        Queries["ğŸ“‹ queries.ts<br/><b>GraphQL Definitions</b><br/>â€¢ GET_POSTS<br/>â€¢ GET_AUTHORS<br/>â€¢ etc."]
    end

    subgraph "Network Layer"
        HTTP["ğŸŒ HTTP Request<br/><b>POST /graphql</b>"]
        API["ğŸ–¥ï¸ GraphQL API<br/><b>Backend Server</b><br/>â€¢ Schema validation<br/>â€¢ Resolvers<br/>â€¢ Database queries"]
    end

    subgraph "Data Flow"
        Request["ğŸ“¤ Request Flow"]
        Response["ğŸ“¥ Response Flow"]
    end

    %% Request Flow (Component -> API)
    View -->|"1. Call action"| Store
    Store -->|"2. Get context client"| Client
    Client -->|"3. Use query definition"| Queries
    Queries -->|"4. Execute query"| HTTP
    HTTP -->|"5. Send GraphQL query"| API

    %% Response Flow (API -> Component)
    API -->|"6. Return data"| HTTP
    HTTP -->|"7. Parse response"| Client
    Client -->|"8. Return result"| Store
    Store -->|"9. Update state"| Store
    Store -.->|"10. Reactive update"| View

    %% Example query annotation
    Request -.->|"Example:<br/>query GetPosts {<br/>  posts {<br/>    id title content<br/>    author { name }<br/>  }<br/>}"| Queries

    Response -.->|"Example:<br/>{<br/>  data: {<br/>    posts: [...]<br/>  }<br/>}"| Store

    %% Styling
    style View fill:#2196F3,stroke:#1565C0,color:#fff
    style Store fill:#9C27B0,stroke:#6A1B9A,color:#fff
    style Client fill:#FF9800,stroke:#E65100,color:#fff
    style Queries fill:#FF9800,stroke:#E65100,color:#fff
    style HTTP fill:#4CAF50,stroke:#2E7D32,color:#fff
    style API fill:#4CAF50,stroke:#2E7D32,color:#fff
    style Request fill:#FFC107,stroke:#F57F17
    style Response fill:#00BCD4,stroke:#006064
